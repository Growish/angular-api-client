// Compiled Wed Jan 31 2018 14:34:26 GMT+0100 (CET)
!function(e,t){"use strict";function a(e,a,n){function o(e,n,o){var i,d;d=(o=o||{}).expires,i=t.isDefined(o.path)?o.path:r,t.isUndefined(n)&&(d="Thu, 01 Jan 1970 00:00:00 GMT",n=""),t.isString(d)&&(d=new Date(d));var s=encodeURIComponent(e)+"="+encodeURIComponent(n);s+=i?";path="+i:"",s+=o.domain?";domain="+o.domain:"",s+=d?";expires="+d.toUTCString():"";var u=(s+=o.secure?";secure":"").length+1;return u>4096&&a.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+u+" > 4096 bytes)!"),s}var r=n.baseHref(),i=e[0];return function(e,t,a){i.cookie=o(e,t,a)}}t.module("ngCookies",["ng"]).provider("$cookies",[function(){function e(e){return e?t.extend({},a,e):a}var a=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(a,n){return{get:function(e){return a()[e]},getObject:function(e){var a=this.get(e);return a?t.fromJson(a):a},getAll:function(){return a()},put:function(t,a,o){n(t,a,e(o))},putObject:function(e,a,n){this.put(e,t.toJson(a),n)},remove:function(t,a){n(t,void 0,e(a))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,a){e.putObject(t,a)},remove:function(t){e.remove(t)}}}]),a.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=a})}(window,window.angular),angular.module("gwApiClient",["ngCookies"]).service("gwApi",["$q","$http","$timeout","$httpParamSerializerJQLike","$cacheFactory","$cookies","$location","gwApiHelper",function(e,t,a,n,o,r,i,d){var s,u=this,l=!1,c=o.get("$http"),p={env:"developing",baseUrl:"https://apidev.growish.com/v1",preserveUserSession:!0,localStorageFile:"gw-api-data",useCookies:!1},f={},m=new function(){var e={path:"/",domain:d.isIp(i.host())?i.host():"."+i.host()};this.save=function(t){if(f.useCookies){var a=JSON.parse(t);r.put("api-id",a.id,e),r.put("api-token",a.token,e),r.put("api-user",window.btoa(t),e)}else localStorage.setItem(f.localStorageFile,t)},this.remove=function(){f.useCookies?(r.remove("api-id",e),r.remove("api-token",e),r.remove("api-user",e)):localStorage.removeItem(f.localStorageFile)},this.get=function(){if(f.useCookies){var t=r.get("api-id",e),a=r.get("api-token",e),n=r.get("api-user",e);return void 0===t||void 0===a||void 0===n?null:(n=JSON.parse(window.atob(n)),n.token=a,n.id=t,n)}return localStorage.getItem(f.localStorageFile)}};this.getBaseUrl=function(){return f.baseUrl};var h=function(e,t,a){this.name=e,this.endPoint=t,this.seed=void 0!==a?a:null,this.mapper={}};h.prototype.getEndPoint=function(e,t){var a=this.endPoint.replace(/{(\d+)}/g,function(t,a){return void 0!==e[a]?e[a]:t}),n="";for(var o in t)""!==n&&(n+="&"),n+=o+"="+t[o];return n?a+"?"+n:a};var g=new function(){var e=[];this.find=function(t){for(var a=0;a<e.length;a++)if(e[a].name===t)return e[a];return null},this.add=function(t,a,n){e.push(new h(t,a,n))}};g.add("auth","/auth/"),g.add("user","/user/{0}/"),g.add("newUser","/user/"),g.add("wallets","/user/{0}/wallet/"),g.add("listWallets","/user/{0}/list/"),g.add("listWallet.statement","/statement/{0}/"),g.add("newListWallet","/list/"),g.add("wallet","/wallet/{0}/"),g.add("newWallet","/wallet/"),g.add("list.product","/list/{0}/product/{1}/"),g.add("user.addressBook","/user/{0}/address-book/"),g.add("user.creditCard","/user/{0}/credit-card/"),g.add("parserExcel","/parserexcel/"),g.add("user.importAddressBook","/user/{0}/import-address-book/"),g.add("user.addressBookShare","/user/{0}/address-book-share/"),g.add("restorePassword","/passwordrecovery/"),g.add("setImageUser","/user/{0}/image/"),g.add("user.addChild","/user/{0}/add-child/"),g.add("user.updateAddressBook","/user/{0}/address-book/{1}/"),g.add("search.organization","/search/organization/"),g.add("newCommonFund","/common-fund-wallet/"),g.add("user.commonFunds","/user/{0}/common-fund-wallet/"),g.add("commonFund","/common-fund-wallet/{0}/"),g.add("closeCommonFundWallet","/close-common-fund-wallet/{0}/"),g.add("fee","/fee/"),g.add("setSchool","/school/"),g.add("closeWallet","/closewallet/"),g.add("cardContribution","/card_contribution/"),g.add("cashContribution","/cash_contribution/"),g.add("withdrawalContribution","/withdrawal_contribution/"),g.add("walletComment","/wallet/{0}/comment/"),g.add("updatePerks","/wallet/{0}/perk/{1}/"),g.add("user.notifications","/user/{0}/notification/"),g.add("notification","/checknoti/{0}/"),g.add("addPerk","/wallet/{0}/perk/"),g.add("statement","/statement/{0}/"),g.add("commonFundStatement","/commonfund-statement/{0}/"),g.add("walletInvite","/wallet/{0}/invite/"),g.add("beneficiary","/beneficiary/"),g.add("withdrawal","/withdrawal/"),g.add("setWalletImage","/wallet/{0}/image/"),g.add("business","/business/"),g.add("chargeWallet","/charge-wallet/"),g.add("transferContribution","/transfer_contribution/"),g.add("getList","/list/{0}/"),g.add("sendMoney","/transfer/"),g.add("checkContribution","/check-contribution/{0}/"),g.add("addressInvite","/wallet/{0}/address-invite/"),g.add("accessToken","/access-token/{0}/"),g.add("addNewProduct","/wallet/{0}/product/"),g.add("deleteProduct","/wallet/{0}/product/{1}/"),g.add("smsinvite","/smsinvite/"),g.add("giftCard","/giftcard/"),g.add("buyProduct","/buyproduct/"),g.add("fbAuth","/fbauth/"),g.add("agencyVisitNotification","/agency-visit-notification/"),g.add("blogPost","/blog-posts/"),g.add("userKycAuthentication","/user-kyc-authentication/"),g.add("saasPartner","/saas-partner/"),g.add("saasBusiness","/saas-business/"),g.add("preUser","/pre-user/"),g.add("downloadEbook","/download-ebook/"),g.add("feedaty","/feedaty/"),g.add("application","/application/"),g.add("agency","/agency/{0}/"),g.add("searchList","/list/"),g.add("agencySearchList","/agency/{0}/list/"),g.add("rsvp","/list/{0}/rsvp/"),g.add("listMessage","/list/{0}/message/"),g.add("fastAssistance","/fastassistance/"),g.add("onDemandHelp","/ondemandhelp/?mode=info"),g.add("getPdfStatement","/pdf-statement/{0}/"),g.add("changeRsvp","/changersvp/"),g.add("unseatUser","/unseatuser/"),g.add("seatUser","/seatuser/"),g.add("setGuest","/list/{0}/guest/"),g.add("requestRsvp","/rsvp/"),g.add("deletePeople","/delete-people/"),g.add("sendAdminMessage","/admin_msg/"),g.add("weddingPremiumProducts","/premium-products/?catalog=listanozze"),g.add("premiumProductSold","/premium-product-sold/"),g.add("table","/list/{0}/table/"),g.add("updateTable","/list/{0}/table/{1}/"),g.add("toDo","/list/{0}/todo/"),g.add("updateToDo","/list/{0}/todo/{1}/"),g.add("lastBeneficiary","/lastbeneficiary/{0}/"),g.add("pdfMessage","/list/{0}/pdf-message/"),g.add("walletProductPosition","/wallet-product-position/{0}/"),g.add("listDelete","/listdelete/"),g.add("list.image","/list/{0}/image/"),g.add("setListProduct","/list/{0}/product/"),g.add("agencyamount","/agencyamount/"),g.add("setGuests","/list/{0}/guests/"),g.add("setProductImage","/list/{0}/product/{1}/image/"),g.add("processPremiumProduct","/process-premium-product/{0}/"),g.add("newCart","/cart/"),g.add("cart.addProduct","/cart/{0}/product/"),g.add("cart","/cart/{0}/"),g.add("cart.product","/cart/{0}/product/{1}/"),g.add("buyPremiumProducts","/buy-premium-products/{0}/"),g.add("cart.voucher","/cart/{0}/voucher/"),g.add("product.comment","/product/{0}/comment/");var v=function(e,t){var a=this,n=!1;this.read=function(a,o){return new b(e,t,null,"GET",a,o,n)},this.save=function(a){return new b(e,t,a,"POST",null,null,n)},this.update=function(a){return new b(e,t,a,"PUT",null,null,n)},this.delete=function(){return new b(e,t,null,"DELETE",null,null,n)},this.setFullResponse=function(){return n=!0,a}},w=function(){this.code=-1,this.validationErrors={},this.validationErrorsFull={},this.handled=!1,this.message=null},b=function(o,r,i,d,u,l,p){var m,h=angular.copy(o),g=angular.copy(r);m=i&&"File"===i.constructor.name?i:angular.copy(i);var v=angular.copy(u),b=e.defer(),y=h.getEndPoint(g,v);if(m&&h.mapper.out&&(m=h.mapper.out(m)),h.seed)return C("Resolving "+y+" from seed"),a(function(){h.mapper.in?b.resolve(h.mapper.in(h.seed)):b.resolve(h.seed)},Math.floor(1e3*Math.random()+1e3)),b.promise;var P=[];P["Content-Type"]="application/x-www-form-urlencoded";var S=null;if(m&&"File"===m.constructor.name)P["Content-Type"]=void 0,(S=new FormData).append("0",m);else if(m&&"POST"===d){P["Content-Type"]=void 0,S=new FormData;for(var $ in m)m.hasOwnProperty($)&&(m[$]&&"File"===i[$].constructor.name?S.append($,i[$]):void 0!==m[$]&&S.append($,m[$]))}else m&&(S=n(m));P["X-App-Key"]=f.appKey,s&&s.token&&(P["X-Auth-Token"]=s.token);var T={cache:!1,method:d,data:S,url:f.baseUrl+y,headers:P,transformRequest:angular.identity};return"GET"===d&&"expired"===k.inCache(T.url)?(c.remove(T.url),C("Dropping cache for "+T.url)):"GET"===d&&"cached"===k.inCache(T.url)?(T.cache=!0,C("Cache found for "+T.url)):"GET"===d&&l&&(k.add(T.url,l),T.cache=!0,C("Caching "+T.url)),C(T),t(T).then(function(e){var t;t=p?{data:h.mapper.in?h.mapper.in(e.data.data):e.data.data,pagination:e.data.pagination,message:"string"==typeof e.data.message?e.data.message:null}:h.mapper.in?h.mapper.in(e.data.data):e.data.data,b.resolve(t)},function(e){var t=new w;t.code=e.status,400===e.status?(t.validationErrorsFull=e.data.message,angular.forEach(e.data.message,function(e,a){angular.forEach(e,function(e,n){t.validationErrors[a]=e})}),"function"==typeof f.error400&&(t.handled=!0,f.error400(t)),b.reject(t)):401===e.status&&"function"==typeof f.error401?(t.handled=!0,f.error401(e.data),b.reject(t)):403===e.status&&"function"==typeof f.error403?(t.handled=!0,t.message=e.data.message,f.error403(e.data),b.reject(t)):b.reject(t)}),b.promise},y=function(){s=null,m.remove()};this.updateSession=function(e){s.firstName=e.firstName,s.lastName=e.lastName,s.birthday=e.birthday,s.taxCode=e.taxCode,m.save(angular.toJson(s))},this.setSession=function(e){s=e,m.save(angular.toJson(e))},this.restoreSession=function(t,a){s={id:t,token:a};var n=e.defer();return u.request("user",s.id).read().then(function(e){u.setSession({token:a,firstName:e.firstName,lastName:e.lastName,birthday:e.birthday,taxCode:e.taxCode,imageUrl:e.imageUrl}),n.resolve(e)},function(){u.dropSession(),n.reject()}),n.promise},this.session=function(t){if(void 0!==t&&t)return s;var a=e.defer();if(s)C("Session found in cache"),a.resolve(s);else{var n=m.get();n&&(n=angular.fromJson(n)),n&&n.id?(s=n,u.request("user",s.id).read().then(function(){C("Session found in local storage and validated in API"),a.resolve(s)},function(){C("Session found in local storage but invalidated in API"),m.remove(),a.reject()})):(C("No session found"),a.reject())}return a.promise},this.logout=function(){var t=e.defer();return u.request("auth").delete().then(function(){t.resolve()},function(e){t.reject(e)}).finally(y),t.promise},this.dropSession=function(){y()},this.initialize=function(e){void 0===e.baseUrl&&void 0!==e.env&&"production"===e.env&&(e.baseUrl="https://api.growish.com/v1"),angular.extend(f,p,e),l=!0,C("I have been initialized with this config",f)},this.addSeed=function(e,t){var a=g.find(e);if(!a)return C("Method "+e+" is not defined."),!1;a.seed=t},this.request=function(){var e=arguments[0];if(!l)return C("You need to initialize the API client first"),!1;var t=g.find(e);if(!t)return C("Method "+e+" is not defined."),!1;for(var a=[],n=1;n<arguments.length;n++)a.push(arguments[n]);return new v(t,a)},this.authenticate=function(e,t){return u.request("auth").save({email:e,password:t})},this.addMapper=function(e,t){var a=g.find(e);return a?"function"!=typeof t.in||"function"!=typeof t.out?(C("The mapper object is not defined correctly"),!1):void(a.mapper=t):(C("Method "+e+" do not exist"),!1)},this.clearCache=function(){c.removeAll()};var k=new function(){var e=[],t=function(t){for(var a=0;a<e.length;a++)if(e[a].url===t)return a;return-1};this.clear=function(){e=[]},this.inCache=function(a){var n=(new Date).getTime(),o=t(a);return o>=0?!e[o].expire||e[o].expire<=n?(e.splice(o,1),"expired"):"cached":null},this.add=function(a,n){var o=(new Date).getTime(),r=t(a);return r>=0?e[r].expire>o||(e[r].expire=o+1e3*n,!0):(e.push({url:a,expire:o+1e3*n}),!0)}};this.flushCache=function(){return k.clear(),!0};var C=function(e,t){"production"!==f.env&&(console.log("***","GW API CLIENT:",e,"***"),t&&console.log(t))}}]),angular.module("gwApiClient").service("gwApiHelper",function(){this.isIp=function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}});