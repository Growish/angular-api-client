// Compiled Wed Aug 22 2018 15:15:42 GMT+0200 (CEST)
!function(e,t){"use strict";function n(e,n,a){var r=a.baseHref(),i=e[0];return function(e,a,o){i.cookie=function(e,a,i){var o,d;d=(i=i||{}).expires,o=t.isDefined(i.path)?i.path:r,t.isUndefined(a)&&(d="Thu, 01 Jan 1970 00:00:00 GMT",a=""),t.isString(d)&&(d=new Date(d));var s=encodeURIComponent(e)+"="+encodeURIComponent(a);s+=o?";path="+o:"",s+=i.domain?";domain="+i.domain:"",s+=d?";expires="+d.toUTCString():"";var u=(s+=i.secure?";secure":"").length+1;return u>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+u+" > 4096 bytes)!"),s}(e,a,o)}}t.module("ngCookies",["ng"]).provider("$cookies",[function(){function e(e){return e?t.extend({},n,e):n}var n=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(n,a){return{get:function(e){return n()[e]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return n()},put:function(t,n,r){a(t,n,e(r))},putObject:function(e,n,a){this.put(e,t.toJson(n),a)},remove:function(t,n){a(t,void 0,e(n))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,n){e.putObject(t,n)},remove:function(t){e.remove(t)}}}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular),angular.module("gwApiClient",["ngCookies"]).service("gwApi",["$q","$http","$timeout","$httpParamSerializerJQLike","$cacheFactory","$cookies","$location","gwApiHelper","gwApiConfig",function(e,t,n,a,r,i,o,d,s){var u,c=this,l=!1,p=r.get("$http"),m={env:"developing",baseUrl:"https://apidev.growish.com/v1",socketServerUrl:"127.0.0.1:4415",preserveUserSession:!0,localStorageFile:"gw-api-data",useCookies:!1,language:"it"},g={},f=new function(){var e={path:"/",domain:d.isIp(o.host())?o.host():"."+d.removeSubdomain(o.host())};this.save=function(t){if(g.useCookies){var n=JSON.parse(t);i.put("api-id",n.id,e),i.put("api-token",n.token,e),i.put("api-user",window.btoa(t),e)}else localStorage.setItem(g.localStorageFile,t)},this.remove=function(){g.useCookies?(i.remove("api-id",e),i.remove("api-token",e),i.remove("api-user",e)):localStorage.removeItem(g.localStorageFile)},this.get=function(){if(g.useCookies){var t=i.get("api-id",e),n=i.get("api-token",e),a=i.get("api-user",e);return void 0===t||void 0===n||void 0===a?null:((a=JSON.parse(window.atob(a))).token=n,a.id=t,a)}return localStorage.getItem(g.localStorageFile)}};this.getBaseUrl=function(){return g.baseUrl},this.getFullUrl=function(e,t,n){var a=v.find(e);return this.getBaseUrl()+a.getEndPoint(t,n)},this.getAuthenticationHeaders=function(){return{"X-App-Key":g.appKey,"X-Auth-Token":u?u.token:""}};var h=function(e,t,n){this.name=e,this.endPoint=t,this.seed=void 0!==n?n:null,this.mapper={}};h.prototype.getEndPoint=function(e,t){var n=this.endPoint.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t}),a="";for(var r in t)""!==a&&(a+="&"),a+=r+"="+t[r];return a?n+"?"+a:n};var v=new function(){var e=[];this.find=function(t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},this.add=function(t,n,a){e.push(new h(t,n,a))}};v.add("auth","/auth/"),v.add("user","/user/{0}/"),v.add("newUser","/user/"),v.add("wallets","/user/{0}/wallet/"),v.add("listWallets","/user/{0}/list/"),v.add("listWallet.statement","/statement/{0}/"),v.add("newListWallet","/list/"),v.add("wallet","/wallet/{0}/"),v.add("newWallet","/wallet/"),v.add("list.product","/list/{0}/product/{1}/"),v.add("user.addressBook","/user/{0}/address-book/"),v.add("user.creditCard","/user/{0}/credit-card/"),v.add("parserExcel","/parserexcel/"),v.add("user.importAddressBook","/user/{0}/import-address-book/"),v.add("user.addressBookShare","/user/{0}/address-book-share/"),v.add("restorePassword","/passwordrecovery/"),v.add("setImageUser","/user/{0}/image/"),v.add("user.addChild","/user/{0}/add-child/"),v.add("user.updateAddressBook","/user/{0}/address-book/{1}/"),v.add("search.organization","/search/organization/"),v.add("newCommonFund","/common-fund-wallet/"),v.add("user.commonFunds","/user/{0}/common-fund-wallet/"),v.add("commonFund","/common-fund-wallet/{0}/"),v.add("closeCommonFundWallet","/close-common-fund-wallet/{0}/"),v.add("fee","/fee/"),v.add("setSchool","/school/"),v.add("closeWallet","/closewallet/"),v.add("cardContribution","/card_contribution/"),v.add("cashContribution","/cash_contribution/"),v.add("withdrawalContribution","/withdrawal_contribution/"),v.add("walletComment","/wallet/{0}/comment/"),v.add("updatePerks","/wallet/{0}/perk/{1}/"),v.add("user.notifications","/user/{0}/notification/"),v.add("notification","/checknoti/{0}/"),v.add("addPerk","/wallet/{0}/perk/"),v.add("statement","/statement/{0}/"),v.add("commonFundStatement","/commonfund-statement/{0}/"),v.add("walletInvite","/wallet/{0}/invite/"),v.add("beneficiary","/beneficiary/"),v.add("withdrawal","/withdrawal/"),v.add("setWalletImage","/wallet/{0}/image/"),v.add("business","/business/"),v.add("chargeWallet","/charge-wallet/"),v.add("transferContribution","/transfer_contribution/"),v.add("getList","/list/{0}/"),v.add("sendMoney","/transfer/"),v.add("checkContribution","/check-contribution/{0}/"),v.add("addressInvite","/wallet/{0}/address-invite/"),v.add("accessToken","/access-token/{0}/"),v.add("addNewProduct","/wallet/{0}/product/"),v.add("deleteProduct","/wallet/{0}/product/{1}/"),v.add("smsinvite","/smsinvite/"),v.add("giftCard","/giftcard/"),v.add("buyProduct","/buyproduct/"),v.add("fbAuth","/fbauth/"),v.add("agencyVisitNotification","/agency-visit-notification/"),v.add("blogPost","/blog-posts/"),v.add("userKycAuthentication","/user-kyc-authentication/"),v.add("saasPartner","/saas-partner/"),v.add("saasBusiness","/saas-business/"),v.add("preUser","/pre-user/"),v.add("downloadEbook","/download-ebook/"),v.add("feedaty","/feedaty/"),v.add("application","/application/"),v.add("agency","/agency/{0}/"),v.add("searchList","/list/"),v.add("agencySearchList","/agency/{0}/list/"),v.add("rsvp","/list/{0}/rsvp/"),v.add("listMessage","/list/{0}/message/"),v.add("fastAssistance","/fastassistance/"),v.add("onDemandHelp","/ondemandhelp/?mode=info"),v.add("getPdfStatement","/pdf-statement/{0}/"),v.add("changeRsvp","/changersvp/"),v.add("unseatUser","/unseatuser/"),v.add("seatUser","/seatuser/"),v.add("setGuest","/list/{0}/guest/"),v.add("requestRsvp","/rsvp/"),v.add("deletePeople","/delete-people/"),v.add("sendAdminMessage","/admin_msg/"),v.add("weddingPremiumProducts","/premium-products/"),v.add("premiumProductSold","/premium-product-sold/{0}/"),v.add("table","/list/{0}/table/"),v.add("updateTable","/list/{0}/table/{1}/"),v.add("toDo","/list/{0}/todo/"),v.add("updateToDo","/list/{0}/todo/{1}/"),v.add("lastBeneficiary","/lastbeneficiary/{0}/"),v.add("pdfMessage","/list/{0}/pdf-message/"),v.add("walletProductPosition","/wallet-product-position/{0}/"),v.add("listDelete","/listdelete/"),v.add("list.image","/list/{0}/image/"),v.add("setListProduct","/list/{0}/product/"),v.add("agencyamount","/agencyamount/"),v.add("setGuests","/list/{0}/guests/"),v.add("setProductImage","/list/{0}/product/{1}/image/"),v.add("processPremiumProduct","/process-premium-product/{0}/"),v.add("newCart","/cart/"),v.add("cart.addProduct","/cart/{0}/product/"),v.add("cart","/cart/{0}/"),v.add("cart.product","/cart/{0}/product/{1}/"),v.add("buyPremiumProducts","/buy-premium-products/{0}/"),v.add("cart.voucher","/cart/{0}/voucher/"),v.add("product.comment","/product/{0}/comment/"),v.add("list.quiz","/list/{0}/quiz/"),v.add("list.editQuiz","/list/{0}/quiz/{1}/"),v.add("list.quizAnswers","/list/{0}/quiz-answers/"),v.add("quiz.newQuestion","/quiz/{0}/question/"),v.add("quiz.question","/quiz/{0}/question/{1}/"),v.add("quizRanking","/quiz-ranking/{0}/"),v.add("quizQuestionPosition","/quiz-question-position/{0}/"),v.add("chatImageUpload","/list/{0}/chat-image-upload/"),v.add("userImageUpload","/wallet/{0}/user-image-upload/"),v.add("updateUserImageUpload","/wallet/{0}/user-image-upload/{1}/"),v.add("sendMoneyBusiness","/transfer-business/"),v.add("userBusinessCoupon","/business-coupon/"),v.add("businessCoupon","/business-coupon/{0}/"),v.add("buyBusinessCoupon","/buy-business-coupon/"),v.add("newGenericList","/generic-list/"),v.add("changePurchaseProduct","/change-purchase-product/{0}/"),v.add("deleteListWallpaper","/image/{0}/"),v.add("adminGreeting","/admin-greeting/{0}/"),v.add("buyDirectPremiumProduct","/buy-direct-premium-product/"),v.add("buyLnoPlan","/buy-lno-plan/"),v.add("userAgencyProduct","/user-agencyproduct/{0}/"),v.add("userAgencyProductImage","/user-agencyproductimage/{0}/"),v.add("userAgencyProductImage.delete","/user-agencyproductimage/{0}/{1}/"),v.add("userAgencyproductQuote","/user-agencyproductquote/{0}/"),v.add("posContribution","/pos-contribution/"),v.add("posContribution.reference","/pos-contribution/{0}/"),v.add("merchantUserWallet","/merchant-user-wallet/"),v.add("merchantActivateUserWallet","/merchant-activate-user-wallet/"),v.add("merchantUserListWallet","/merchant-user-listwallet/"),v.add("merchantUserGenericListWallet","/merchant-user-genericlistwallet/"),v.add("pidAuth","/pid-auth/"),v.add("merchantResendPin","/merchant-resend-pin/{0}/"),v.add("merchantUser","/merchant-user/"),v.add("merchantWallet","/merchant-wallet/"),v.add("transferMerchant","/transfer-merchant/"),v.add("saasMerchant","/saas-merchant/"),v.add("userAgencyKycActivation","/user-agency-kyc-activation/{0}/"),v.add("userAgencyKyc","/user-agency-kyc-activation/"),v.add("acceptContract","/accept-contract/{0}/"),v.add("weddingPremiumProduct","/premium-products/{0}/"),v.add("newCardRegistration","/card-registration/"),v.add("modifyCardRegistration","/card-registration/{0}/"),v.add("getCards","/card/"),v.add("getUserAllWallet","/user-all-wallet/"),v.add("transferUserWallet","/transfer-user-wallet/"),v.add("transferPayment","/transfer-payment/"),v.add("cardPayment","/card-payment/");var w,b=function(r,i,o,d,s,c,l,m,f){var h,v=angular.copy(r),w=angular.copy(i);h=o&&"File"===o.constructor.name?o:angular.copy(o);var b=angular.copy(s),y=e.defer(),k=v.getEndPoint(w,b);if(h&&v.mapper.out&&(h=v.mapper.out(h)),v.seed)return P("Resolving "+k+" from seed"),n(function(){v.mapper.in?y.resolve(v.mapper.in(v.seed)):y.resolve(v.seed)},Math.floor(1e3*Math.random()+1e3)),y.promise;var S=[];S["Cache-control"]="no-store",S["Cache-Control"]="no-cache",S.Pragma="no-cache",S.Expires="0","it"!==g.language&&(S["X-Language"]=g.language),S["Content-Type"]="application/x-www-form-urlencoded";var A=null;if(h&&"File"===h.constructor.name)S["Content-Type"]=void 0,(A=new FormData).append("0",h);else if(h&&"POST"===d)for(var q in S["Content-Type"]=void 0,A=new FormData,h)h.hasOwnProperty(q)&&(h[q]&&o[q]&&"File"===o[q].constructor.name?A.append(q,o[q]):void 0!==h[q]&&A.append(q,h[q]));else h&&(A=a(h));S["X-App-Key"]=g.appKey,u&&u.token&&(S["X-Auth-Token"]=u.token);var z={cache:!1,method:d,data:A,url:g.baseUrl+k,headers:S,transformRequest:angular.identity};return"GET"===d&&"expired"===C.inCache(z.url)?(p.remove(z.url),P("Dropping cache for "+z.url)):"GET"===d&&"cached"===C.inCache(z.url)?(z.cache=!0,P("Cache found for "+z.url)):"GET"===d&&c&&(C.add(z.url,c),z.cache=!0,P("Caching "+z.url)),"function"==typeof f&&(z.uploadEventHandlers={progress:f}),P(z),t(z).then(function(e){var t;t=l?{data:v.mapper.in?v.mapper.in(e.data.data):e.data.data,pagination:e.data.pagination,message:"string"==typeof e.data.message?e.data.message:null}:v.mapper.in?v.mapper.in(e.data.data):e.data.data,y.resolve(t)},function(e){var t=new function(){this.code=-1,this.validationErrors={},this.validationErrorsFull={},this.handled=!1,this.message=null};t.code=e.status,400===e.status?(t.validationErrorsFull=e.data.message,angular.forEach(e.data.message,function(e,n){angular.forEach(e,function(e,a){t.validationErrors[n]=e})}),"function"!=typeof g.error400||m||(t.handled=!0,g.error400(t)),y.reject(t)):401!==e.status||"function"!=typeof g.error401||m?403!==e.status||"function"!=typeof g.error403||m?y.reject(t):(t.handled=!0,t.message=e.data.message,g.error403(e.data),y.reject(t)):(t.handled=!0,g.error401(e.data),y.reject(t))}),y.promise},y=function(){u=null,f.remove()};function k(e,t,n){var a="p"+String(Math.round(1e4*Math.random()))+String((new Date).getTime());P("Setting listener",{messageId:a}),w.once(a,function(e){P("Processing listener",{messageId:a}),200===e.code?n.resolve(e):n.reject(e)}),P("Emiting socket message",{cmd:e,messageId:a}),w.emit("message",{cmd:e,payload:t,messageId:a,auth:c.getAuthenticationHeaders()})}this.language=function(e){g.language=e},this.updateSession=function(e){u.firstName=e.firstName,u.lastName=e.lastName,u.birthday=e.birthday,u.taxCode=e.taxCode,f.save(angular.toJson(u))},this.setSession=function(e){u=e,f.save(angular.toJson(e))},this.restoreSession=function(t,n){u={id:t,token:n};var a=e.defer();return c.request("user",u.id).read().then(function(e){c.setSession({token:n,firstName:e.firstName,lastName:e.lastName,birthday:e.birthday,taxCode:e.taxCode,imageUrl:e.imageUrl}),a.resolve(e)},function(){c.dropSession(),a.reject()}),a.promise},this.session=function(t){if(void 0!==t&&t)return u;var n=e.defer();if(u)P("Session found in cache"),n.resolve(u);else{var a=f.get();a&&(a=angular.fromJson(a)),a&&a.id?(u=a,c.request("user",u.id).onlyLocalError().read().then(function(){P("Session found in local storage and validated in API"),n.resolve(u)},function(){P("Session found in local storage but invalidated in API"),f.remove(),n.reject()})):(P("No session found"),n.reject())}return n.promise},this.logout=function(){var t=e.defer();return c.request("auth").delete().then(function(){t.resolve()},function(e){t.reject(e)}).finally(y),t.promise},this.dropSession=function(){y()},this.initialize=function(e){void 0===e.baseUrl&&void 0!==e.env&&"production"===e.env&&(e.baseUrl="https://api.growish.com/v1",e.socketServerUrl="https://webpayments.growish.com"),angular.extend(g,m,e),l=!0,P("I have been initialized with this config",g)},this.addSeed=function(e,t){var n=v.find(e);if(!n)return P("Method "+e+" is not defined."),!1;n.seed=t},this.request=function(){var e=arguments[0];if(!l)return P("You need to initialize the API client first"),!1;var t=v.find(e);if(!t)return P("Method "+e+" is not defined."),!1;for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);return new function(e,t){var n=this,a=!1,r=!1;this.read=function(n,i){return new b(e,t,null,"GET",n,i,a,r,null)},this.save=function(n,i){return new b(e,t,n,"POST",null,null,a,r,i||null)},this.update=function(n){return new b(e,t,n,"PUT",null,null,a,r,null)},this.delete=function(){return new b(e,t,null,"DELETE",null,null,a,r,null)},this.setFullResponse=function(){return a=!0,n},this.onlyLocalError=function(){return r=!0,n}}(t,n)},this.ioRequest=function(t,n){var a,r=e.defer();return"undefined"==typeof io?(P("You need to load socket.io library"),r.reject(),r.promise):(w&&w.connected?k(t,n,r):(a=e.defer(),P("Connecting to socket server"),(w=io(g.socketServerUrl,{reconnection:!1})).on("connect",function(){P("Connected to socket server"),a.resolve()}),w.on("connect_error",function(){P("Error while connecting to socket server"),a.reject({message:"Il server di pagamenti non è raggiungibile in questo momento, si prega di riprovare più tardi."})}),a.promise).then(function(){k(t,n,r)},function(e){r.reject(e)}),r.promise)},this.ioOnDisconnect=function(e){return"function"!=typeof e?P("A handler function must be defined"):void 0===w?P("There is no socket connection"):void w.on("disconnect",e)},this.ioQuestionHandler=function(e){return"function"!=typeof e?P("A handler function must be defined"):void 0===w?P("There is no socket connection"):void w.on("question",function(t){e({id:t.id,text:t.text,options:t.options},{send:function(e){P("Sending response to socker server",{id:t.id,value:e}),w.emit(t.id,e)},cancel:function(){w.emit(t.id,null)}})})},this.ioNotificationHandler=function(e){return"function"!=typeof e?P("A handler function must be defined"):void 0===w?P("There is no socket connection"):void w.on("notification",function(t){e(t)})},this.authenticate=function(e,t){return c.request("auth").save({email:e,password:t})},this.addMapper=function(e,t){var n=v.find(e);return n?"function"!=typeof t.in||"function"!=typeof t.out?(P("The mapper object is not defined correctly"),!1):void(n.mapper=t):(P("Method "+e+" do not exist"),!1)},this.clearCache=function(){p.removeAll()};var C=new function(){var e=[],t=function(t){for(var n=0;n<e.length;n++)if(e[n].url===t)return n;return-1};this.clear=function(){e=[]},this.inCache=function(n){var a=(new Date).getTime(),r=t(n);return r>=0?!e[r].expire||e[r].expire<=a?(e.splice(r,1),"expired"):"cached":null},this.add=function(n,a){var r=(new Date).getTime(),i=t(n);return i>=0?e[i].expire>r||(e[i].expire=r+1e3*a,!0):(e.push({url:n,expire:r+1e3*a}),!0)}};this.flushCache=function(){return C.clear(),!0};var P=function(e,t){"production"!==g.env&&(console.log("***","GW API CLIENT:",e,"***"),t&&console.log(t))};s.get()&&this.initialize(s.get())}]),angular.module("gwApiClient").service("gwApiHelper",function(){var e="ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|be|bf|bg|bh|bi|bj|bm|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|cl|cm|cn|co|cr|cu|cv|cw|cx|cz|de|dj|dk|dm|do|dz|ec|ee|eg|es|et|eu|fi|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|im|in|io|iq|ir|is|it|je|jo|jp|kg|ki|km|kn|kp|kr|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|na|nc|ne|nf|ng|nl|no|nr|nu|nz|om|pa|pe|pf|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|yt".split("|"),t="com|edu|gov|net|mil|org|nom|sch|caa|res|off|gob|int|tur|ip6|uri|urn|asn|act|nsw|qld|tas|vic|pro|biz|adm|adv|agr|arq|art|ato|bio|bmd|cim|cng|cnt|ecn|eco|emp|eng|esp|etc|eti|far|fnd|fot|fst|g12|ggf|imb|ind|inf|jor|jus|leg|lel|mat|med|mus|not|ntr|odo|ppg|psc|psi|qsl|rec|slg|srv|teo|tmp|trd|vet|zlg|web|ltd|sld|pol|fin|k12|lib|pri|aip|fie|eun|sci|prd|cci|pvt|mod|idv|rel|sex|gen|nic|abr|bas|cal|cam|emr|fvg|laz|lig|lom|mar|mol|pmn|pug|sar|sic|taa|tos|umb|vao|vda|ven|mie|北海道|和歌山|神奈川|鹿児島|ass|rep|tra|per|ngo|soc|grp|plc|its|air|and|bus|can|ddr|jfk|mad|nrw|nyc|ski|spy|tcm|ulm|usa|war|fhs|vgs|dep|eid|fet|fla|flå|gol|hof|hol|sel|vik|cri|iwi|ing|abo|fam|gok|gon|gop|gos|aid|atm|gsm|sos|elk|waw|est|aca|bar|cpa|jur|law|sec|plo|www|bir|cbg|jar|khv|msk|nov|nsk|ptz|rnd|spb|stv|tom|tsk|udm|vrn|cmw|kms|nkz|snz|pub|fhv|red|ens|nat|rns|rnu|bbs|tel|bel|kep|nhs|dni|fed|isa|nsn|gub|e12|tec|орг|обр|упр|alt|nis|jpn|mex|ath|iki|nid|gda|inc".split("|");this.isIp=function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)},this.removeSubdomain=function(n){for(var a=(n=n.replace(/^www\./,"")).split(".");a.length>3;)a.shift();return 3===a.length&&(a[1].length>2&&a[2].length>2||-1===t.indexOf(a[1])&&-1===e.indexOf(a[2]))&&a.shift(),a.join(".")}}),angular.module("gwApiClient").provider("gwApiConfig",function(){var e=null;return{set:function(t){e=t},$get:function(){return{get:function(){return e}}}}});